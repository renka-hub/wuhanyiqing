(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08c0194a","chunk-2d20f743"],{b461:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("el-dialog",{attrs:{title:t.dataForm.id?"修改":"新增","close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(e){t.visible=e}}},[a("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"80px"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.dataFormSubmit()}}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{attrs:{placeholder:"姓名"},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),a("el-form-item",{attrs:{label:"身份证"}},[a("el-input",{attrs:{placeholder:"身份证"},model:{value:t.dataForm.idCard,callback:function(e){t.$set(t.dataForm,"idCard",e)},expression:"dataForm.idCard"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{attrs:{placeholder:"手机号"},model:{value:t.dataForm.mobile,callback:function(e){t.$set(t.dataForm,"mobile",e)},expression:"dataForm.mobile"}})],1),a("el-form-item",{attrs:{label:"年龄"}},[a("el-input",{attrs:{placeholder:"年龄"},model:{value:t.dataForm.age,callback:function(e){t.$set(t.dataForm,"age",e)},expression:"dataForm.age"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-input",{attrs:{placeholder:"性别"},model:{value:t.dataForm.sex,callback:function(e){t.$set(t.dataForm,"sex",e)},expression:"dataForm.sex"}})],1),a("el-form-item",{attrs:{label:"街道"}},[a("el-input",{attrs:{placeholder:"街道"},model:{value:t.dataForm.street,callback:function(e){t.$set(t.dataForm,"street",e)},expression:"dataForm.street"}})],1),a("el-form-item",{attrs:{label:"社区"}},[a("el-input",{attrs:{placeholder:"社区"},model:{value:t.dataForm.community,callback:function(e){t.$set(t.dataForm,"community",e)},expression:"dataForm.community"}})],1),a("el-form-item",{attrs:{label:"地址"}},[a("el-input",{attrs:{placeholder:"地址"},model:{value:t.dataForm.address,callback:function(e){t.$set(t.dataForm,"address",e)},expression:"dataForm.address"}})],1),a("el-form-item",{attrs:{label:"风险级别"}},[a("el-input",{attrs:{placeholder:"风险级别"},model:{value:t.dataForm.riskLevel,callback:function(e){t.$set(t.dataForm,"riskLevel",e)},expression:"dataForm.riskLevel"}})],1),a("el-form-item",{attrs:{label:"风险原因类型"}},[a("el-input",{attrs:{placeholder:"风险原因类型"},model:{value:t.dataForm.riskReasonType,callback:function(e){t.$set(t.dataForm,"riskReasonType",e)},expression:"dataForm.riskReasonType"}})],1),a("el-form-item",{attrs:{label:"风险原因类型描述"}},[a("el-input",{attrs:{placeholder:"风险原因类型描述"},model:{value:t.dataForm.riskReasonTypeDesc,callback:function(e){t.$set(t.dataForm,"riskReasonTypeDesc",e)},expression:"dataForm.riskReasonTypeDesc"}})],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.visible=!1}}},[t._v("取消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},i=[],l=(a("7f7f"),{data:function(){return{visible:!1,roleList:[],dataForm:{id:"",name:"",community:"",riskLevel:"",statisticalDate:"",mobile:"",street:"",age:"",sex:"",idCard:"",address:"",riskReasonType:"",riskReasonTypeDesc:""},dataRule:{}}},methods:{init:function(t){var e=this;this.dataForm.id=t||0,this.$http({url:this.$http.adornUrl("/yqdata/info/".concat(this.dataForm.id)),method:"get",params:this.$http.adornParams()}).then(function(t){var a=t.data;e.visible=!0,a&&0===a.code&&(e.dataForm.name=a.entity.name,e.dataForm.community=a.entity.community,e.dataForm.riskLevel=a.entity.riskLevel,e.dataForm.statisticalDate=a.entity.statisticalDate,e.dataForm.mobile=a.entity.mobile,e.dataForm.street=a.entity.street,e.dataForm.age=a.entity.age,e.dataForm.sex=a.entity.sex,e.dataForm.idCard=a.entity.idCard,e.dataForm.address=a.entity.address,e.dataForm.riskReasonType=a.entity.riskReasonType,e.dataForm.riskReasonTypeDesc=a.entity.riskReasonTypeDesc)})},dataFormSubmit:function(){var t=this;this.$refs["dataForm"].validate(function(e){e&&t.$http({url:t.$http.adornUrl("/yqdata/".concat(t.dataForm.id?"update":"save")),method:"post",data:t.$http.adornData({id:t.dataForm.id||void 0,name:t.dataForm.name,community:t.dataForm.community,riskLevel:t.dataForm.riskLevel,mobile:t.dataForm.mobile,street:t.dataForm.street,age:t.dataForm.age,sex:t.dataForm.sex,idCard:t.dataForm.idCard,address:t.dataForm.address,riskReasonType:t.dataForm.riskReasonType,riskReasonTypeDesc:t.dataForm.riskReasonTypeDesc})}).then(function(e){var a=e.data;a&&0===a.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(a.msg)})})}}}),o=l,n=a("2877"),s=Object(n["a"])(o,r,i,!1,null,null,null);e["default"]=s.exports},f21d:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"mod-user"},[a("el-form",{attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getDataList()}}},[a("div",{staticClass:"col-xs-4"},[a("el-form-item",[a("div",{staticClass:"block"},[a("el-date-picker",{attrs:{type:"date",clearable:!1,"value-format":"yyyy-MM-dd",placeholder:"选择日期",format:"yyyy 年 MM 月 dd 日"},model:{value:t.dataForm.statisticalDate,callback:function(e){t.$set(t.dataForm,"statisticalDate",e)},expression:"dataForm.statisticalDate"}})],1)]),a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择风险级别"},model:{value:t.dataForm.riskLevel,callback:function(e){t.$set(t.dataForm,"riskLevel",e)},expression:"dataForm.riskLevel"}},t._l(t.options,function(t){return a("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}),1)],1)],1),a("div",{staticClass:"col-xs-4"},[a("el-form-item",[a("el-select",{attrs:{clearable:"",placeholder:"请选择镇/街"},on:{change:function(e){return t.getCommunity()}},model:{value:t.dataForm.street,callback:function(e){t.$set(t.dataForm,"street",e)},expression:"dataForm.street"}},t._l(t.opt1,function(t){return a("el-option",{key:t.adminUnitId,attrs:{label:t.adminUnitName,value:t.adminUnitId}})}),1)],1),a("el-form-item",[a("el-select",{attrs:{disabled:t.itDisabled,clearable:"",placeholder:"请选择村/社区"},model:{value:t.dataForm.community,callback:function(e){t.$set(t.dataForm,"community",e)},expression:"dataForm.community"}},t._l(t.opt2,function(t){return a("el-option",{key:t.adminUnitId,attrs:{label:t.adminUnitName,value:t.adminUnitId}})}),1)],1),a("el-form-item",[a("el-input",{attrs:{placeholder:"姓名",clearable:""},model:{value:t.dataForm.name,callback:function(e){t.$set(t.dataForm,"name",e)},expression:"dataForm.name"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.getDataList(t.dataForm.statisticalDate)}}},[t._v("查询")])],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.download()}}},[t._v("导出数据")])],1)],1)]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:t.dataList,border:""},on:{"selection-change":t.selectionChangeHandle}},[a("el-table-column",{attrs:{prop:"personId","header-align":"center",align:"center",width:"85",label:"编号"}}),a("el-table-column",{attrs:{prop:"personName","header-align":"center",align:"center",width:"80",label:"姓名"}}),a("el-table-column",{attrs:{prop:"certId","header-align":"center",align:"center",label:"身份证号"}}),a("el-table-column",{attrs:{prop:"gender","header-align":"center",width:"50",align:"center",label:"性别"}}),a("el-table-column",{attrs:{prop:"birthDate","header-align":"center",align:"center",width:"50",label:"年龄"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n                "+t._s(Math.ceil((new Date-new Date(e.row.birthDate))/1e3/60/60/24/365))+"\n            ")]}}])}),a("el-table-column",{attrs:{prop:"mobilePhoneNum","header-align":"center",align:"center",label:"手机号"}}),a("el-table-column",{attrs:{prop:"adminTownName","header-align":"center",align:"center",width:"80",label:"镇/街"}}),a("el-table-column",{attrs:{prop:"adminVillageName","header-align":"center",align:"center",width:"80",label:"村/社区"}}),a("el-table-column",{attrs:{prop:"address","header-align":"center",align:"center",label:"常住地"}}),a("el-table-column",{attrs:{prop:"riskLevel","header-align":"center",align:"center",width:"80",label:"风险级别"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.riskLevel?a("div",[t._v("低风险")]):t._e(),1==e.row.riskLevel?a("div",[t._v("中风险")]):t._e(),2==e.row.riskLevel?a("div",[t._v("高风险")]):t._e()]}}])}),a("el-table-column",{attrs:{prop:"ruleDesc","header-align":"center",align:"center",label:"风险判断规则"}})],1),a("el-pagination",{attrs:{"current-page":t.pageIndex,"page-sizes":[10,20,50,100],"page-size":t.pageSize,total:t.totalPage,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.sizeChangeHandle,"current-change":t.currentChangeHandle}}),t.addOrUpdateVisible?a("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:t.getDataList}}):t._e()],1)},i=[],l=(a("7f7f"),a("b461")),o={data:function(){return{options:[{value:-1,label:"全部"},{value:0,label:"低风险"},{value:1,label:"中风险"},{value:2,label:"高风险"}],dataForm:{name:"",community:"",riskLevel:2,statisticalDate:"",street:""},opt1:[],opt2:[],dataList:[],pageIndex:1,pageSize:10,totalPage:0,dataListLoading:!1,dataListSelections:[],addOrUpdateVisible:!1,itDisabled:!0}},components:{AddOrUpdate:l["default"]},activated:function(){},mounted:function(){this.getMaxDate(),this.selectList()},methods:{getMaxDate:function(){var t=this;this.$http({url:this.$http.adornUrl("/risk/evaluate/getMaxDate"),method:"get",params:this.$http.adornParams({})}).then(function(e){var a=e.data;a&&0===a.code&&(t.dataForm.statisticalDate=a.maxDate,t.getDataList(a.maxDate))})},selectList:function(){var t=this;this.$http({url:this.$http.adornUrl("/admin/getTownList"),method:"get",params:this.$http.adornParams({})}).then(function(e){var a=e.data;a&&0===a.code&&(t.opt1=a.data)})},getCommunity:function(){var t=this;this.dataForm.community="",""!=this.dataForm.street?this.$http({url:this.$http.adornUrl("/admin/getChildListByParentId"),method:"get",params:this.$http.adornParams({superId:this.dataForm.street})}).then(function(e){var a=e.data;a&&0===a.code&&(t.itDisabled=!1,t.opt2=a.data)}):this.itDisabled=!0},download:function(){var t="http://10.192.72.34:8080/wuhanyiqing-api/analyze/downloadExcel?personName="+this.dataForm.name;null==this.dataForm.community?t+="&village=":t=t+"&village="+this.dataForm.community,null==this.dataForm.riskLevel?t+="&riskLevel=":t=t+"&riskLevel="+this.dataForm.riskLevel,null==this.dataForm.statisticalDate?t+="&checkDate=":t=t+"&checkDate="+this.dataForm.statisticalDate,null==this.dataForm.street?t+="&townId=":t=t+"&townId="+this.dataForm.street,window.open(t,"_blank")},dateFormat:function(t){return t.statisticalDate.substr(0,10)},getDataList:function(t){var e=this,a={};a.page=this.pageIndex,a.limit=this.pageSize,a.checkDate=t,a.townId=this.dataForm.street,a.villageId=this.dataForm.community,a.riskLevel=-1==this.dataForm.riskLevel?"":this.dataForm.riskLevel,a.personName=this.dataForm.name,this.dataListLoading=!0,this.$http({url:this.$http.adornUrl("/analyze/list"),method:"post",data:this.$http.adornData(a)}).then(function(t){var a=t.data;a&&0===a.code?(e.dataList=a.page.records,e.totalPage=a.page.total,a.page.records.length<1&&(e.totalPage=0)):(e.dataList=[],e.totalPage=0),e.dataListLoading=!1})},sizeChangeHandle:function(t){this.pageSize=t,this.pageIndex=1,this.getDataList()},currentChangeHandle:function(t){this.pageIndex=t,this.getDataList()},selectionChangeHandle:function(t){this.dataListSelections=t},addOrUpdateHandle:function(t){var e=this;this.addOrUpdateVisible=!0,this.$nextTick(function(){e.$refs.addOrUpdate.init(t)})}}},n=o,s=a("2877"),d=Object(s["a"])(n,r,i,!1,null,null,null);e["default"]=d.exports}}]);
//# sourceMappingURL=chunk-08c0194a.29124be4.js.map